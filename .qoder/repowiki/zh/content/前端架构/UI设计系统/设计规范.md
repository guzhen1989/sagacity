# 设计规范

<cite>
**本文档引用的文件**  
- [variables.scss](file://frontend/src/styles/variables.scss)
- [dark-theme.scss](file://frontend/src/styles/dark-theme.scss)
- [index.scss](file://frontend/src/styles/index.scss)
- [app.ts](file://frontend/src/stores/app.ts)
- [App.vue](file://frontend/src/App.vue)
</cite>

## 目录
1. [引言](#引言)
2. [色彩系统](#色彩系统)
3. [字体与排版规范](#字体与排版规范)
4. [间距与布局系统](#间距与布局系统)
5. [暗色模式实现机制](#暗色模式实现机制)
6. [设计原则与示例](#设计原则与示例)

## 引言

sagacity平台的设计规范文档旨在为开发团队和设计团队提供统一的视觉语言和用户体验准则。本规范基于前端代码库中的SCSS变量和样式文件，详细定义了色彩、字体、间距、布局以及暗色模式的实现方式。通过遵循这些规范，确保平台在不同模块和页面之间保持一致的视觉体验和交互逻辑。

**Section sources**
- [variables.scss](file://frontend/src/styles/variables.scss)
- [dark-theme.scss](file://frontend/src/styles/dark-theme.scss)

## 色彩系统

sagacity平台的色彩系统基于SCSS变量定义，分为主色、辅助色和状态色三大类，确保在不同组件和场景中的一致性应用。

### 主色与辅助色

主色用于突出重要操作和交互元素，辅助色用于区分不同类型的反馈和状态。

- **主色**：`#409EFF`（变量：`$primary-color`）
- **成功色**：`#67C23A`（变量：`$success-color`）
- **警告色**：`#E6A23C`（变量：`$warning-color`）
- **危险色**：`#F56C6C`（变量：`$danger-color`）
- **信息色**：`#909399`（变量：`$info-color`）

这些颜色变量在`variables.scss`文件中定义，被广泛应用于按钮、标签、通知等UI组件中。

### 状态色应用规范

状态色的使用遵循以下准则：
- **成功状态**：用于表示操作成功、数据正常等正面反馈
- **警告状态**：用于表示需要用户注意的情况，如数据异常
- **危险状态**：用于表示错误、失败或需要立即处理的问题
- **信息状态**：用于提供中性信息或辅助说明

**Section sources**
- [variables.scss](file://frontend/src/styles/variables.scss)

## 字体与排版规范

平台的字体系统采用Inter字体族，并结合系统默认字体，确保在不同设备上的可读性和美观性。

### 字体层级

字体大小通过SCSS变量进行统一管理，形成清晰的层级结构：

- **超小号**：12px（变量：`$font-size-xs`）
- **小号**：14px（变量：`$font-size-sm`）
- **中号**：16px（变量：`$font-size-md`）
- **大号**：18px（变量：`$font-size-lg`）
- **超大号**：20px（变量：`$font-size-xl`）

### 标题样式

标题样式在`index.scss`和`dark-theme.scss`中分别定义了浅色和暗色主题下的表现：

- **h1**：32px（浅色主题），28px（暗色主题）
- **h2**：28px（浅色主题），24px（暗色主题）
- **h3**：24px（浅色主题），20px（暗色主题）
- **h4**：20px（浅色主题），18px（暗色主题）

所有标题均使用600字重，确保足够的视觉重量。

### 行高与字重

- **行高**：采用1.5倍行高，确保文本的可读性
- **字重**：常规文本使用400字重，标题和强调文本使用600字重

**Section sources**
- [variables.scss](file://frontend/src/styles/variables.scss)
- [index.scss](file://frontend/src/styles/index.scss)
- [dark-theme.scss](file://frontend/src/styles/dark-theme.scss)

## 间距与布局系统

平台采用基于8px基准的间距系统，确保界面元素之间的和谐与一致性。

### 间距变量

间距通过SCSS变量进行定义，形成统一的间距层级：

- **超小间距**：4px（变量：`$spacing-xs`）
- **小间距**：8px（变量：`$spacing-sm`）
- **中间距**：16px（变量：`$spacing-md`）
- **大间距**：24px（变量：`$spacing-lg`）
- **超大间距**：32px（变量：`$spacing-xl`）

### 布局网格

布局采用Flexbox和CSS Grid结合的方式，配合响应式断点：

- **超小断点**：480px（变量：`$breakpoint-xs`）
- **小断点**：768px（变量：`$breakpoint-sm`）
- **中断点**：992px（变量：`$breakpoint-md`）
- **大断点**：1200px（变量：`$breakpoint-lg`）
- **超大断点**：1920px（变量：`$breakpoint-xl`）

在移动设备上，通过`mobile-hidden`和`desktop-hidden`工具类实现内容的适配显示。

### 边框与阴影

- **边框圆角**：提供4px、6px、8px、12px四种圆角尺寸
- **阴影**：定义轻、中、重三种阴影效果，用于元素的层次区分

**Section sources**
- [variables.scss](file://frontend/src/styles/variables.scss)
- [index.scss](file://frontend/src/styles/index.scss)

## 暗色模式实现机制

暗色模式的实现采用CSS类切换和CSS变量结合的方式，确保平滑的视觉过渡和良好的可访问性。

### 主题切换逻辑

主题切换通过Pinia状态管理实现，核心逻辑位于`app.ts`文件中：

```typescript
toggleTheme() {
  const themes: Array<'light' | 'dark' | 'auto'> = ['light', 'dark', 'auto']
  const currentIndex = themes.indexOf(this.theme)
  this.theme = themes[(currentIndex + 1) % themes.length]
  this.applyTheme()
}
```

### 暗色主题样式覆盖

暗色主题样式在`dark-theme.scss`文件中定义，通过`html.dark`选择器实现样式覆盖：

- **全局背景**：设置为纯黑色（`#000000`）
- **文字颜色**：标题和重要文本使用白色（`#ffffff`），次要文本使用系统变量
- **组件样式**：对按钮、卡片、表单等组件进行针对性优化

### 自动主题检测

平台支持自动主题模式，根据用户系统偏好进行匹配：

```typescript
isDarkTheme(): boolean {
  if (this.theme === 'auto') {
    return window.matchMedia('(prefers-color-scheme: dark)').matches
  }
  return this.theme === 'dark'
}
```

当检测到系统偏好为暗色时，自动应用暗色主题。

### 样式应用流程

1. 用户触发主题切换
2. 更新Pinia状态中的主题值
3. 调用`applyTheme()`方法
4. 通过`document.documentElement.classList.toggle('dark', isDark)`切换HTML类
5. 浏览器应用对应的CSS规则

**Section sources**
- [dark-theme.scss](file://frontend/src/styles/dark-theme.scss)
- [app.ts](file://frontend/src/stores/app.ts)
- [App.vue](file://frontend/src/App.vue)

## 设计原则与示例

sagacity平台的设计遵循一致性、可读性和可用性三大核心原则。

### 一致性原则

通过SCSS变量和组件化设计，确保：
- 相同类型的组件在不同页面中表现一致
- 色彩、间距、字体等设计元素统一应用
- 交互反馈模式标准化

### 可读性原则

- **对比度**：确保文本与背景的对比度符合WCAG 2.1标准
- **字体选择**：采用无衬线字体，提高屏幕可读性
- **层次结构**：通过字体大小、字重和颜色建立清晰的信息层级

### 可用性原则

- **响应式设计**：适配不同屏幕尺寸和设备
- **无障碍支持**：考虑色盲用户和辅助技术的使用需求
- **交互反馈**：提供清晰的视觉反馈，如按钮悬停、点击状态

### 实际界面示例

在分析页面、设置页面和仪表盘页面中，均体现了上述设计原则：
- 页面标题使用白色文字，确保在暗色背景上的可读性
- 卡片组件通过阴影和边框区分层次
- 按钮组采用统一的圆角和间距，保持视觉一致性

**Section sources**
- [dark-theme.scss](file://frontend/src/styles/dark-theme.scss)
- [index.scss](file://frontend/src/styles/index.scss)
- [app.ts](file://frontend/src/stores/app.ts)